@import "tailwindcss";
@config "../../tailwind.config.ts";

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
	/* Keep your existing colors */
	--color-global-bg: oklch(95% 0.01 100);
	--color-global-text: oklch(10% 0.01 264);
	--color-link: oklch(55.44% 0.0431 185.69);
	--color-accent: oklch(26.6% 0.125 264.8);
	--color-accent-2: oklch(18.15% 0 0);
	--color-quote: oklch(26.6% 0.125 264.8);

	/* THE FIX: "Inter" is now the first priority */
	--font-sans:
		"Inter", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
		"Segoe UI Symbol", "Noto Color Emoji";
}

@layer base {
	html {
		color-scheme: light dark;
		accent-color: var(--color-accent);
		scrollbar-gutter: stable;

		/* READABILITY FIRST: Keeping the larger font size */
		font-size: 1.2rem;

		@media (min-width: 640px) {
			font-size: 1.4rem;
		}

		&[data-theme="light"] {
			color-scheme: light;
		}

		&[data-theme="dark"] {
			color-scheme: dark;
			--color-global-bg: #1f1f1f;
			--color-global-text: #ada7a4;
			--color-link: #e0e0e0;
			--color-accent: #e0e0e0;
			--color-accent-2: #e0e0e0;
			--color-quote: #ada7a4;
		}
	}

	:target {
		scroll-margin-block: 5ex;
	}
	@view-transition {
		navigation: auto;
	}
	:where([data-astro-image]) {
		object-fit: var(--fit);
		object-position: var(--pos);
	}
	[data-astro-image="full-width"] {
		width: 100%;
	}
	[data-astro-image="constrained"] {
		max-width: 100%;
	}
}

@layer components {
	@import "./components/admonition.css";
	@import "./components/github-card.css";

	.cactus-link {
		@apply text-accent-2 hover:text-accent font-bold no-underline transition-colors;
	}

	.title {
		@apply text-accent-2 mb-8 font-sans text-3xl leading-none font-bold md:text-[40px] md:tracking-tight;
	}

	.prose :where(code) {
		@apply text-accent-2 mx-1 rounded bg-white/10 px-2 py-1 font-mono text-sm md:text-base;

		white-space: pre !important;
		word-break: keep-all !important;
		overflow-wrap: normal !important;
		display: inline-block !important;
		overflow-x: auto;
		max-width: 100%;
		vertical-align: baseline; /* Aligns perfectly with text flow */
	}
}

@utility prose {
	--tw-prose-body: var(--color-global-text);
	--tw-prose-bold: var(--color-global-text);
	--tw-prose-bullets: var(--color-global-text);
	--tw-prose-code: var(--color-global-text);
	--tw-prose-headings: var(--color-accent-2);
	--tw-prose-hr: 0.5px dashed #666;
	--tw-prose-links: var(--color-link);
	--tw-prose-quotes: var(--color-quote);
	--tw-prose-th-borders: #666;

	line-height: 1.6;
}

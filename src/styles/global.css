@import "tailwindcss";
@config "../../tailwind.config.ts";

@custom-variant dark (&:where([data-theme="dark"], [data-theme="dark"] *));

@theme {
    /* LIGHT MODE: Ivy League (Blue & Cream) */
    --color-global-bg: oklch(95% 0.01 100); 
    --color-global-text: oklch(10% 0.01 264); 
    --color-link: oklch(55.44% 0.0431 185.69);
    --color-accent: oklch(26.6% 0.125 264.8);
    --color-accent-2: oklch(18.15% 0 0);
    --color-quote: oklch(26.6% 0.125 264.8);
}

@layer base {
    html {
        color-scheme: light dark;
        accent-color: var(--color-accent);
        scrollbar-gutter: stable;
        font-size: 1.125rem; 

        @media (min-width: 640px) {
            font-size: 1.25rem; 
        }

        &[data-theme="light"] {
            color-scheme: light;
        }

        /* DARK MODE: Linear High-Contrast (Obsidian & White) */
        &[data-theme="dark"] {
            color-scheme: dark;
            --color-global-bg: oklch(10% 0 0); 
            --color-global-text: oklch(80% 0 0); 
            --color-link: oklch(98% 0 0);
            --color-accent: oklch(98% 0 0);
            --color-accent-2: oklch(98% 0 0);
            --color-quote: oklch(70% 0 0);
        }
    }

    :target {
        scroll-margin-block: 5ex;
    }

    @view-transition {
        navigation: auto;
    }

    :where([data-astro-image]) {
        object-fit: var(--fit);
        object-position: var(--pos);
    }
    [data-astro-image="full-width"] {
        width: 100%;
    }
    [data-astro-image="constrained"] {
        max-width: 100%;
    }
}

@layer components {
    @import "./components/admonition.css";
    @import "./components/github-card.css";

    .cactus-link {
        @apply font-bold text-accent-2 no-underline hover:text-accent transition-colors;
    }

    .title {
        @apply text-accent-2 text-2xl font-semibold font-mono;
    }

    /* FIXED: Bulletproof rule to stop code wrapping */
    .prose :where(code) {
        white-space: pre !important;        /* Forces text to stay on one line */
        word-break: keep-all !important;    /* Prevents breaking inside words */
        overflow-wrap: normal !important;   /* Prevents breaking long strings */
        display: inline-block !important;   /* Allows scrolling */
        overflow-x: auto;                   /* Adds scrollbar if too long */
        max-width: 100%;
        vertical-align: bottom;
    }
}

@utility prose {
    --tw-prose-body: var(--color-global-text);
    --tw-prose-bold: var(--color-global-text);
    --tw-prose-bullets: var(--color-global-text);
    --tw-prose-code: var(--color-global-text);
    --tw-prose-headings: var(--color-accent-2);
    --tw-prose-hr: 0.5px dashed #666;
    --tw-prose-links: var(--color-link);
    --tw-prose-quotes: var(--color-quote);
    --tw-prose-th-borders: #666;
}